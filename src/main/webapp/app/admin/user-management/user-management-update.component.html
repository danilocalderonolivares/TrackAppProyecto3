<div class="row justify-content-center">
    <div class="col-8">
        <form name="editForm" role="form" novalidate (ngSubmit)="save()" #editForm="ngForm">
            <h2 id="myUserLabel">
                Crear - editar usuario
            </h2>
            <div>
                <jhi-alert-error></jhi-alert-error>
                <div class="form-group" [hidden]="!user.id">
                    <label>ID</label>
                    <input type="text" class="form-control" name="id"
                           [(ngModel)]="user.id" readonly>
                </div>

                <div class="form-group">
                    <label class="form-control-label">Nombre de usuario</label>
                    <input type="text" class="form-control" name="login" #loginInput="ngModel"
                           [(ngModel)]="user.login" required minlength="1" maxlength="50" pattern="^[_.@A-Za-z0-9-]*$">

                    <div *ngIf="loginInput.dirty && loginInput.invalid">
                        <small class="form-text text-danger"
                               *ngIf="loginInput.errors.required">
                            Este campo es requerido
                        </small>

                        <small class="form-text text-danger"
                               *ngIf="loginInput.errors.maxlength"
                        >
                            Este campo no debe tener mas de 50 caracteres
                        </small>

                        <small class="form-text text-danger"
                               *ngIf="loginInput.errors.pattern">
                            Este campo debe tener un formato de email valido (correo@correo.com)
                        </small>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-control-label" for="field_nombre">Nombre</label>
                    <input type="text" class="form-control" name="nombre" id="field_nombre"
                           [(ngModel)]="customUser.nombre" required/>
                    <div [hidden]="!(editForm.controls.nombre?.dirty && editForm.controls.nombre?.invalid)">
                        <small class="form-text text-danger"
                               [hidden]="!editForm.controls.nombre?.errors?.required">
                            Este campo es requerido
                        </small>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-control-label" for="field_apellidos">Apellidos</label>
                    <input type="text" class="form-control" name="apellidos" id="field_apellidos"
                           [(ngModel)]="customUser.apellidos" required/>
                    <div [hidden]="!(editForm.controls.apellidos?.dirty && editForm.controls.apellidos?.invalid)">
                        <small class="form-text text-danger"
                               [hidden]="!editForm.controls.apellidos?.errors?.required">
                            Este campo es requerido
                        </small>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-control-label">Email</label>
                    <input type="email" class="form-control" name="email" #emailInput="ngModel"
                           [(ngModel)]="user.email" minlength="5" required maxlength="254" email>

                    <div *ngIf="emailInput.dirty && emailInput.invalid">
                        <small class="form-text text-danger"
                               *ngIf="emailInput.errors.required">
                            Este campo es requerido
                        </small>

                        <small class="form-text text-danger"
                               *ngIf="emailInput.errors.maxlength"
                        >
                            Este campo no debe tener mas de 100 caracteres
                        </small>

                        <small class="form-text text-danger"
                               *ngIf="emailInput.errors.minlength"
                        >
                            Este campo requiere de al menor 5 caracteres
                        </small>

                        <small class="form-text text-danger"
                               *ngIf="emailInput.errors.email">
                            Este email es inv√°lido, ya esta registrado en el sistema
                        </small>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-control-label" for="field_tipo">Tipo Usuario (Empleado)</label>
                    <select class="form-control" id="field_tipo" name="tipo" [(ngModel)]="selectedType" required>
                        <option [ngValue]="null"></option>
                        <option
                            [ngValue]="tipoEmpleadoOption.id === customUser.tipo?.id ? customUser.tipo : tipoEmpleadoOption"
                            *ngFor="let tipoEmpleadoOption of tipoempleados; trackBy: trackTipoEmpleadoById">{{tipoEmpleadoOption.nombreTipo}}</option>
                    </select>
                    <div [hidden]="!(editForm.controls.tipo?.dirty && editForm.controls.tipo?.invalid)">
                        <small class="form-text text-danger"
                               [hidden]="!editForm.controls.tipo?.errors?.required">
                            Este campo es requerido
                        </small>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-control-label" for="field_horarios">Horario</label>
                    <select class="form-control" id="field_horarios" name="horarios" [(ngModel)]="selectedSchedule"
                            required>
                        <option [ngValue]="null"></option>
                        <option
                            [ngValue]="horarioOption.id === customUser.horarios?.id ? customUser.horarios : horarioOption"
                            *ngFor="let horarioOption of horarios; trackBy: trackHorarioById">{{horarioOption.nombre}}</option>
                    </select>
                    <div [hidden]="!(editForm.controls.horarios?.dirty && editForm.controls.horarios?.invalid)">
                        <small class="form-text text-danger"
                               [hidden]="!editForm.controls.horarios?.errors?.required">
                            Este campo es requerido
                        </small>
                    </div>
                </div>
                <!--<div class="form-check">
                     <label class="form-check-label" for="activated">
                         <input class="form-check-input" [disabled]="user.id === null" type="checkbox" id="activated" name="activated" [(ngModel)]="user.activated">
                         <span>Activado</span>
                     </label>
                 </div>-->

                <div class="form-group">
                    <label>Accesar como</label>
                    <select required class="form-control" multiple name="authority" [(ngModel)]="user.authorities">
                        <option *ngFor="let authority of authorities" [value]="authority">{{authority}}</option>
                    </select>
                    <div [hidden]="!(editForm.controls.authority?.dirty && editForm.controls.authority?.invalid)">
                        <small class="form-text text-danger"
                               [hidden]="!editForm.controls.authority?.errors?.required">
                            Este campo es requerido
                        </small>
                    </div>
                </div>
            </div>
            <div>
                <button type="button" class="btn btn-secondary" (click)="previousState()">
                    <fa-icon [icon]="'ban'"></fa-icon>&nbsp;<span
                >Cancelar</span>
                </button>
                <button type="submit" [disabled]="editForm.form.invalid || isSaving" class="btn btn-primary">
                    <fa-icon [icon]="'save'"></fa-icon>&nbsp;<span>Guardar</span>
                </button>
            </div>
        </form>
    </div>
</div>
